<div class="container">
    <h2>Almost there! Review your SOW, Budget, and Risk Assessment details before submitting</h2>
    <p>Scroll through your details. Need changes? Click the edit link. Once everything looks good, submit your request to proceed.</p>
  
    <!-- SOW Review Section -->
    <mat-card class="section-card">
      <mat-card-title>
        Basic Info Details
        <a (click)="edit('sow', 'SOW')" class="edit-link"><mat-icon>edit</mat-icon> Edit</a>
      </mat-card-title>
      <mat-card-content>
        <div class="info-section">
          <p><strong>Purchase name:</strong> {{sowdata.purchase_name}}</p>
          <p><strong>Spend Category:</strong> {{sowdata.spend_category}}</p>
          <p><strong>Purchase Description:</strong> {{sowdata.purchase_description}}</p>
        </div>
        <mat-divider></mat-divider>
        <div class="timeline">
          <h4>Timeline</h4>
          <p><strong>Work Start Date:</strong> {{sowdata.work_start_date}}</p>
          <p><strong>Work End Date:</strong>{{sowdata.work_end_date}}</p>
        </div>
        <mat-divider></mat-divider>
        <div class="markets">
          <h4>Select the market(s) benefiting from the services provided</h4>
          <p><strong>Select Country:</strong> {{sowdata.country}}</p>
          <p><strong>Select Currency:</strong> {{sowdata.currency}}</p>
          <p><strong>Select Role:</strong> {{sowdata.row_id}}</p>
        </div>
      </mat-card-content>
    </mat-card>
  
    <!-- Allocate Budget Section -->
    <mat-card class="section-card">
      <mat-card-title>
        Allocate Budget
        <a (click)="edit('allocatedBudget', 'Allocated Budget')" class="edit-link"><mat-icon>edit</mat-icon> Edit</a>
      </mat-card-title>
      <mat-card-content>
        <h4>Share your spend request amount by tactic(s)</h4>
        <p><strong>Total Spend:</strong> {{sowdata.total_amount}}</p>
        <p><strong>Currency:</strong> {{sowdata.currency}}</p>
        <mat-divider></mat-divider>
        <h4>Forecast and Budget</h4>
        <ng-container *ngFor="let item of budgetData">
          <div class="budget-group">
            <p><strong>{{ item.cc_name }}</strong></p>
        
            <ng-container *ngFor="let time of item.time; let i = index" style="display: flex; flex-direction: row; justify-content: space-around;">
              <div class="time-entry"> 
                <p> {{ time }}</p>
                <p>{{item.forecast[i]}}</p>
              </div>
            </ng-container>
            
          </div>
          <mat-divider></mat-divider>
        </ng-container>
        

       
       
      </mat-card-content>
    </mat-card>
  
    <!-- Risk Assessment Section -->
    <mat-card class="section-card">
      <mat-card-title>
        Risk Assessment
        <a (click)="edit('riskAssessment', 'Risk Assessment')" class="edit-link"><mat-icon>edit</mat-icon> Edit</a>
      </mat-card-title>
      <mat-card-content>
        <h4>Supplier Details</h4>
        <p><strong>Supplier Legal Name:</strong> {{sowdata.supplier_legal_name}}</p>
        <p><strong>Name of supplier primary point of contact:</strong> {{sowdata.supplier_poc_name}}</p>
        <p><strong>Email of supplier point of contact:</strong> {{sowdata.supplier_poc_email}}</p>
        <p><strong>Supplier POC:</strong>{{sowdata.supplier_poc_name}}</p>
        <p><strong>Supplier POC Email:</strong> {{sowdata.supplier_poc_email}}</p>
        <p><strong>Marketing Garage Exception ID:</strong> </p>
      </mat-card-content>
    </mat-card>

    <!-- Additional Details Section -->
<mat-card class="section-card">
    <mat-card-title>Additional Details
      <a (click)="edit('riskAssessment', 'Risk Assessment')" class="edit-link"><mat-icon>edit</mat-icon> Edit</a>
    </mat-card-title>
    <mat-card-content>
      <div class="info-section">
        <ng-container *ngFor="let item of reviewData">
          <p>
            <strong>{{ item.field }}</strong>
            <br />
            <ng-container *ngIf="item.response?.length; else noResponse">
              {{ item.response.join(', ') }}
            </ng-container>
            <ng-template #noResponse>
              <em>No response</em>
            </ng-template>
          </p>
          <mat-divider></mat-divider>
        </ng-container>
      </div>
    </mat-card-content>
    
  </mat-card>
  
  </div>
  
  
  

<div class="container">
    <h1 class="text-center">Review and Submit</h1>
    <div class="Create-spend-request-button-div">
        <button class="back-continue-button back"  (click)="clickNext('back')">Back</button>
        <button class="back-continue-button continue" [ngClass]="{'active':isActive}" (click)="clickNext('continue')">Continue</button>
    </div>
</div>